@import "tailwindcss";
@plugin "tailwindcss-animate";

html {
  scroll-behavior: smooth;
}

/* ═══════════════════════════════════════════════════════════
   DÉFINITIONS UNIQUES DES COULEURS (oklch uniquement)
   ═══════════════════════════════════════════════════════════ */

:root {
  /* ─────────────────────────────────────────────────────────
     LAYOUT & UI BASE
     ───────────────────────────────────────────────────────── */
  --background: oklch(0.98 0 0);        /* Blanc cassé (L=98%) */
  --foreground: oklch(0.20 0 0);        /* Gris très foncé (L=20%) */
  
  --card: oklch(1 0 0);                 /* Blanc pur pour cards */
  --card-foreground: oklch(0.20 0 0);
  
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.20 0 0);
  
  --muted: oklch(0.96 0 0);             /* Gris très clair (L=96%) */
  --muted-foreground: oklch(0.50 0 0);  /* Gris moyen (L=50%) */
  
  --border: oklch(0.90 0 0);            /* Gris clair (L=90%) */
  --input: oklch(0.90 0 0);
  --ring: oklch(0.65 0.222 223);        /* Bleu (focus ring) */
  
  /* ─────────────────────────────────────────────────────────
     COLORS SÉMANTIQUES
     ───────────────────────────────────────────────────────── */
  
  /* PRIMARY (Bleu) - Correspondant à #0ea5e9 */
  --primary: oklch(0.65 0.222 223);
  --primary-foreground: oklch(0.98 0 0);
  
  /* SECONDARY (Violet) - Correspondant à #8b5cf6 */
  --secondary: oklch(0.60 0.24 290);
  --secondary-foreground: oklch(0.98 0 0);
  
  /* ACCENT (Amber) - Correspondant à #f59e0b */
  --accent: oklch(0.70 0.18 70);
  --accent-foreground: oklch(0.20 0 0);
  
  /* DESTRUCTIVE (Rouge) */
  --destructive: oklch(0.58 0.245 27);
  --destructive-foreground: oklch(0.98 0 0);
  
  /* ─────────────────────────────────────────────────────────
     CHARTS
     ───────────────────────────────────────────────────────── */
  --chart-1: oklch(0.65 0.222 41);      /* Orange */
  --chart-2: oklch(0.60 0.118 185);     /* Cyan */
  --chart-3: oklch(0.55 0.24 290);      /* Violet */
  --chart-4: oklch(0.70 0.18 70);       /* Jaune */
  --chart-5: oklch(0.75 0.188 130);     /* Vert */
  
  /* ─────────────────────────────────────────────────────────
     SIDEBAR
     ───────────────────────────────────────────────────────── */
  --sidebar: oklch(0.98 0 0);
  --sidebar-foreground: oklch(0.20 0 0);
  --sidebar-primary: oklch(0.65 0.222 223);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.96 0 0);
  --sidebar-accent-foreground: oklch(0.20 0 0);
  --sidebar-border: oklch(0.90 0 0);
  --sidebar-ring: oklch(0.65 0.222 223);
  
  /* ─────────────────────────────────────────────────────────
     MISC
     ───────────────────────────────────────────────────────── */
  --radius: 0.625rem;
}

/* ═══════════════════════════════════════════════════════════
   DARK MODE (Contraste optimisé)
   ═══════════════════════════════════════════════════════════ */

.dark {
  /* ─────────────────────────────────────────────────────────
     LAYOUT & UI BASE
     ───────────────────────────────────────────────────────── */
  --background: oklch(0.18 0 0);        /* Gris très foncé (L=18%) */
  --foreground: oklch(0.95 0 0);        /* Blanc cassé (L=95%) */
  
  --card: oklch(0.22 0 0);              /* Gris foncé pour cards (L=22%, contraste 1.22:1) */
  --card-foreground: oklch(0.95 0 0);
  
  --popover: oklch(0.22 0 0);
  --popover-foreground: oklch(0.95 0 0);
  
  --muted: oklch(0.28 0 0);             /* Gris moyen-foncé (L=28%) */
  --muted-foreground: oklch(0.65 0 0);  /* Gris moyen-clair (L=65%) */
  
  --border: oklch(0.35 0 0);            /* Bordure visible (L=35%, contraste 1.9:1) ✅ */
  --input: oklch(0.35 0 0);
  --ring: oklch(0.65 0.222 223);
  
  /* ─────────────────────────────────────────────────────────
     COLORS SÉMANTIQUES (Plus claires en dark mode)
     ───────────────────────────────────────────────────────── */
  
  /* PRIMARY (Bleu plus clair) */
  --primary: oklch(0.75 0.18 223);      /* L=75% pour contraste */
  --primary-foreground: oklch(0.20 0 0);
  
  /* SECONDARY (Violet plus clair) */
  --secondary: oklch(0.70 0.20 290);
  --secondary-foreground: oklch(0.98 0 0);
  
  /* ACCENT (Amber plus clair) */
  --accent: oklch(0.75 0.15 70);
  --accent-foreground: oklch(0.20 0 0);
  
  /* DESTRUCTIVE (Rouge) */
  --destructive: oklch(0.65 0.22 27);
  --destructive-foreground: oklch(0.98 0 0);
  
  /* ─────────────────────────────────────────────────────────
     CHARTS (Plus saturées en dark mode)
     ───────────────────────────────────────────────────────── */
  --chart-1: oklch(0.70 0.24 41);
  --chart-2: oklch(0.70 0.15 185);
  --chart-3: oklch(0.65 0.26 290);
  --chart-4: oklch(0.75 0.20 70);
  --chart-5: oklch(0.70 0.22 130);
  
  /* ─────────────────────────────────────────────────────────
     SIDEBAR
     ───────────────────────────────────────────────────────── */
  --sidebar: oklch(0.22 0 0);
  --sidebar-foreground: oklch(0.95 0 0);
  --sidebar-primary: oklch(0.75 0.18 223);
  --sidebar-primary-foreground: oklch(0.20 0 0);
  --sidebar-accent: oklch(0.28 0 0);
  --sidebar-accent-foreground: oklch(0.95 0 0);
  --sidebar-border: oklch(0.35 0 0);
  --sidebar-ring: oklch(0.65 0.222 223);
}

/* ═══════════════════════════════════════════════════════════
   @THEME INLINE (Mapping vers Tailwind)
   ═══════════════════════════════════════════════════════════ */

@theme inline {
  /* Base colors */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  
  /* Card */
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  
  /* Popover */
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  
  /* Primary */
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  
  /* Secondary */
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  
  /* Accent */
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  
  /* Muted */
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  
  /* Destructive */
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  
  /* Border & Input */
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  
  /* Charts */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  
  /* Radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* ═══════════════════════════════════════════════════════════
   BASE STYLES
   ═══════════════════════════════════════════════════════════ */

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  
  body {
    @apply bg-background text-foreground;
  }
}

/* ═══════════════════════════════════════════════════════════
   CAPTCHA DEMO ANIMATIONS
   ═══════════════════════════════════════════════════════════ */

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

.animate-shake {
  animation: shake 0.3s ease-in-out;
}

@keyframes pulse-slow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-pulse-slow {
  animation: pulse-slow 2s ease-in-out infinite;
}

.delay-100 { animation-delay: 100ms; }
.delay-200 { animation-delay: 200ms; }
.delay-500 { animation-delay: 500ms; }

/* ═══════════════════════════════════════════════════════════
   COMPONENT UTILITIES (Contraste Optimisé)
   ═══════════════════════════════════════════════════════════ */

@layer components {
  /* ─────────────────────────────────────────────────────────
     SECTION BACKGROUNDS
     ───────────────────────────────────────────────────────── */
  .section-base {
    @apply bg-background/95 backdrop-blur-sm;
  }
  
  .section-muted {
    @apply bg-muted/95 backdrop-blur-sm;
  }
  
  /* ─────────────────────────────────────────────────────────
     CARD BACKGROUNDS
     ───────────────────────────────────────────────────────── */
  .card-base {
    @apply bg-card/98 backdrop-blur-sm border border-border/80;
  }
  
  .card-interactive {
    @apply bg-card/98 backdrop-blur-sm border border-border/80 
           hover:bg-card hover:border-border transition-colors;
  }
  
  /* ─────────────────────────────────────────────────────────
     TEXT CONTRAST UTILITIES
     ───────────────────────────────────────────────────────── */
  .text-high-contrast {
    @apply text-foreground;
  }
  
  .text-medium-contrast {
    @apply text-foreground/85;
  }
  
  .text-low-contrast {
    @apply text-foreground/70;
  }
  
  .text-xs-safe {
    @apply text-xs text-foreground/90;
  }
  
  /* ─────────────────────────────────────────────────────────
     COLORED BACKGROUNDS (Sémantique + texte forcé)
     ───────────────────────────────────────────────────────── */
  .bg-success-subtle {
    @apply bg-green-50 text-green-900 border border-green-200;
  }
  
  .dark .bg-success-subtle {
    @apply bg-green-900/30 text-green-100 border-green-700/50;
  }
  
  .bg-danger-subtle {
    @apply bg-red-50 text-red-900 border border-red-200;
  }
  
  .dark .bg-danger-subtle {
    @apply bg-red-900/30 text-red-100 border-red-700/50;
  }
  
  .bg-warning-subtle {
    @apply bg-amber-50 text-amber-900 border border-amber-200;
  }
  
  .dark .bg-warning-subtle {
    @apply bg-amber-900/30 text-amber-100 border-amber-700/50;
  }
  
  .bg-info-subtle {
    @apply bg-blue-50 text-blue-900 border border-blue-200;
  }
  
  .dark .bg-info-subtle {
    @apply bg-blue-900/30 text-blue-100 border-blue-700/50;
  }
  
  .bg-purple-subtle {
    @apply bg-purple-50 text-purple-900 border border-purple-200;
  }
  
  .dark .bg-purple-subtle {
    @apply bg-purple-900/30 text-purple-100 border-purple-700/50;
  }
  
  .bg-cyan-subtle {
    @apply bg-cyan-50 text-cyan-900 border border-cyan-200;
  }
  
  .dark .bg-cyan-subtle {
    @apply bg-cyan-900/30 text-cyan-100 border-cyan-700/50;
  }
  
  /* ─────────────────────────────────────────────────────────
     COLORED CARDS (Sémantique + contraste fort)
     ───────────────────────────────────────────────────────── */
  .card-success {
    @apply bg-green-50 text-green-900 border-2 border-green-200;
  }
  
  .dark .card-success {
    @apply bg-green-950/50 text-green-50 border-green-800/60;
  }
  
  .card-danger {
    @apply bg-red-50 text-red-900 border-2 border-red-200;
  }
  
  .dark .card-danger {
    @apply bg-red-950/50 text-red-50 border-red-800/60;
  }
  
  .card-warning {
    @apply bg-amber-50 text-amber-900 border-2 border-amber-200;
  }
  
  .dark .card-warning {
    @apply bg-amber-950/50 text-amber-50 border-amber-800/60;
  }
  
  .card-info {
    @apply bg-blue-50 text-blue-900 border-2 border-blue-200;
  }
  
  .dark .card-info {
    @apply bg-blue-950/50 text-blue-50 border-blue-800/60;
  }
  
  .card-primary {
    @apply bg-sky-50 text-sky-900 border-2 border-sky-200;
  }
  
  .dark .card-primary {
    @apply bg-sky-950/50 text-sky-50 border-sky-800/60;
  }
  
  .card-purple {
    @apply bg-purple-50 text-purple-900 border-2 border-purple-200;
  }
  
  .dark .card-purple {
    @apply bg-purple-950/50 text-purple-50 border-purple-800/60;
  }
  
  /* ─────────────────────────────────────────────────────────
     COLORED ALERTS (Bannières)
     ───────────────────────────────────────────────────────── */
  .alert-success {
    @apply bg-green-100 text-green-900 border-l-4 border-green-500 p-4 rounded;
  }
  
  .dark .alert-success {
    @apply bg-green-900/40 text-green-100 border-green-400;
  }
  
  .alert-danger {
    @apply bg-red-100 text-red-900 border-l-4 border-red-500 p-4 rounded;
  }
  
  .dark .alert-danger {
    @apply bg-red-900/40 text-red-100 border-red-400;
  }
  
  .alert-warning {
    @apply bg-amber-100 text-amber-900 border-l-4 border-amber-500 p-4 rounded;
  }
  
  .dark .alert-warning {
    @apply bg-amber-900/40 text-amber-100 border-amber-400;
  }
  
  .alert-info {
    @apply bg-blue-100 text-blue-900 border-l-4 border-blue-500 p-4 rounded;
  }
  
  .dark .alert-info {
    @apply bg-blue-900/40 text-blue-100 border-blue-400;
  }
  
  /* ─────────────────────────────────────────────────────────
     OVERLAYS
     ───────────────────────────────────────────────────────── */
  .overlay-light {
    @apply bg-white/90 dark:bg-neutral-950/90;
  }
  
  .overlay-heavy {
    @apply bg-white/95 dark:bg-neutral-950/95;
  }
}